{
  "@attribute": {
    "name": "_EHR/lab_results",
    "group_by": "EPI",
    "column_types": {
      "order_date": {
        "type": "date",
        "input_format": "YYYY-MM-DD"
      },
      "cost": {
        "type": "currency"
      }
    },
    "@array": {
      "group_by": "lab_order_id",
      "sort_by": {
        "field": "order_date",
        "order": "descending"
      },
      "@item": {
        "lab_order_id": "{lab_order_id}",
        "order_date": "{order_date}",
        "provider": "{provider_name}",
        "tests": {
          "@array": {
            "collect": true,
            "sort_by": {
              "field": "result.value",
              "order": "asc"
            },
            "@item": {
              "test_code": "{test_code}",
              "test_name": "{test_name}",
              "result": {
                "value": "{result_value}",
                "unit": "{result_unit}",
                "reference_range": "{reference_range}"
              },
              "status": "{status}",
              "abnormal_flag": "{abnormal_flag}",
              "priority": "{priority}",
              "cost": "{cost}"
            }
          }
        }
      }
    }
  }
}
